shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
?z.test
??norm.test
?pwr.t.test
?powwr.t.test
?power.t.test
pwr.norm.test(d=-.1,power=.8,alternative="less")
pwr.norm.test(d=.1,power=.8,alternative="less")
power.t.test(d=.1,sd=1,power=.8,alternative="one.sided")
power.t.test(d=-.1,sd=1,power=.8,alternative="one.sided")
pwr.norm.test(d=.1,power=.8,alternative="greater")
pwr.norm.test(d=.1,power=.8,alternative="greater")$n * 2
power.t.test(d=-.1,sd=1,power=.8,alternative="one.sided",type="one.sample")
power.t.test(d=.1,sd=1,power=.8,alternative="one.sided",type="one.sample")
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
devtools::install_github("rmarkdown","rstudio")
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
pwr.norm.test
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
uniroot
title: "test!"
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
p.body<-quote({})
p.body<-quote({pnorm(qnorm(.05/2,lower=F)-d*sqrt(n),lower=F)+pnorm(qnorm(.05/2,lower=T)-d*sqrt(n),lower=T)})
d=.8
power=.8
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05))$root
n
d=2.8
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05))$root
n
d=2.81
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05))$root
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
d=5
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
d=3
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
d=6
d=4
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
d=4.9
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
d=4.8
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
d=4.5
n<-uniroot(function(n) eval(p.body)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
0L
2L
2
5*2L
2.5L
?pmax
pmax(1e-4,abs(c(1+1e-10,1e5)))
Delta<-function(u) 0.01*pmax(1e-4,abs(u))
delta<-Delta(c(1+1e-10,1e5))
delta
?any
is.finite(INf)
is.finite(Inf)
is.finite(8938509845435345345)
is.finite(pi)
?...
findN<-function(n) eval(p.body)-power
lower=1+1e-10
upper=1e5
is.na(f.lower<-f(lower<- lower-delta[1],...))
is.na(f.lower<-findN(lower<- lower-delta[1],...))
is.na(f.lower<-findN(lower<- lower-delta[1]))
lower=-12
is.na(f.lower<-findN(lower<- lower-delta[1]))
lower=1+1e-10
?trace
trace
maxiter
?uniroot
p.body.less<-quote({pnorm(qnorm(.05,lower=T)-d*sqrt(n),lower=T)})
p.body.less<-quote({pnorm(qnorm(.05,lower=T)-d*sqrt(n),lower=T)})
p.body.greater<-quote({pnorm(qnorm(.05,lower=F)-d*sqrt(n),lower=F)})
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
d
d=2.8
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
d=3.5
n
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
pwr.seq<-seq(0,1,.01)
head(pwr.seq)
pwr.seq<-seq(0.01,0.99,.01)
n<-uniroot(function(n) eval(p.body.greater)-power.seq,c(1+1e-10,1e05),extendInt="yes")$root
n<-uniroot(function(n) eval(p.body.greater)-pwr.seq,c(1+1e-10,1e05),extendInt="yes")$root
n
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
power=seq(0.3,0.99)
power=seq(0.3,0.99,.01)
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
power=.4
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
d
d=1
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
n
d=2.8
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="yes")$root
sqrt
.Primitive("sqrt")
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root
n<-uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="downX")$root
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
try(uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root)
try(uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root,silent=T)
suppressWarnings(try(uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root,silent=T))
test<-suppressWarnings(try(uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root,silent=T))
test
d=.7
test<-suppressWarnings(try(uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root,silent=T))
test
d=2.8
test<-suppressWarnings(try(uniroot(function(n) eval(p.body.greater)-power,c(1+1e-10,1e05),extendInt="upX")$root,silent=T))
is.numeric(test)
test<-suppressWarnings(try(pwr.norm.test(d=2.8,power=.8)))
test
test<-suppressWarnings(try(pwr.norm.test(d=2.8,power=.8)$n))
test
while(is.numeric(suppressWarnings(try(pwr.norm.test(d=es,power=.8)$n)))){}
es=0.01
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
maxPower<-function(pwr){
es=0.01
while(is.numeric(suppressWarnings(try(pwr.norm.test(d=es,power=pwr)$n))) && es<=3){
n<-pwr.norm.test(d=es,power=.8)$n
es<-es+0.1
}
print(es)
}
maxPower(.8)
suppressWarnings(try(maxPower(.8)))
foo<-maxPower(.8)
foo
pwr.seq
try(maxPower(.7))
test<-try(maxPower(.7))
plot(pwr.seq,maxPower(pwr.seq))
n<-pwr.norm.test(d=es,power=pwr)$n
source('~/.active-rstudio-document', echo=TRUE)
n<-pwr.norm.test(d=es,power)
n<-pwr.norm.test(d=es,power=pwr.seq)
length(n)
for(i in pwr.seq){}
nvec<-matrix(nrow=1,ncol=length(pwr.seq))
nvec
length(nvec)
for(i in pwr.seq){
nvec[i]<-maxPower(i)
}
plot(pwr.seq,nvec)
plot(pwr.seq,nvec,min=0,max=5)
plot(pwr.seq,nvec,xmin=0,xmax=1,ymax=5)
plot(pwr.seq,nvec,xlim=c(0,1),ylim=c(0,5))
head(nvec)
for(i in pwr.seq){
nvec[i]<-maxPower(i)
}
for(i in seq(0.01,0.99,0.01)){
nvec[i]<-maxPower(i)
}
nvc
nvec
nvec<-rep(NA,length(pwr.seq))
for(i in seq(0.01,0.99,0.01)){
nvec[i]<-maxPower(i)
}
plot(pwr.seq,nvec)
nvec
length(nvec)
for(i in 1:99){
nvec[i]<-maxPower(pqr.seq[i])
}
for(i in 1:99){
nvec[i]<-maxPower(pwr.seq[i])
}
nvec
plot(pwr.seq,nvec)
source('~/.active-rstudio-document', echo=TRUE)
plot(pwr.seq,nvec)
source('~/.active-rstudio-document', echo=TRUE)
plot(pwr.seq,nvec)
pwr.norm.test(d=.01,power=.01)
pwr.norm.test(d=.02,power=.01)
pwr.norm.test(d=.001,power=.01)
pwr.norm.test(d=0,power=.01)
source('~/.active-rstudio-document', echo=TRUE)
plot(pwr.seq,nvec)
tail(nvec)
matrix(pwr.seq,nvec,ncol=length(pwr.seq))
matrix(pwr.seq,nvec,ncol=length(pwr.seq),nrow=2)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
plot(pwr.seq,nvec)
nvec
for(i in 1:99){
nvec[i]<-maxPower(pwr.seq[i])
}
nvec
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
test<-try(pwr.norm.test(d=3,power=.8)$n,silent=T)
test
is.in("f() values at end points",test)
isIn("f() values at end points",test)
??isin
??in
??is.in
pmatch("f() values at end points",test)
is(test)
pmatch("f() values at end points",as.character(test))
as.character(test)
test<-as.character(test)
is(test)
pmatch("f() values at end points",as.character(test))
?grepl
grepl("f() values at end points",as.character(test))
test
grepl("f() values at end points",as.character(test))
is(test)
as.string(test)
?string
install.packages("string")
install.packages("xtable")
install.packages("xtable")
library(xtable)
as.string(test)
is.string(x)
library(string)
?as.character
?grepl
text<-"f() values at end points"
grepl("es","test")
grepl("et","test")
grepl(text,test)
test
is.character(test)
library(xtable)
is.string(test)
??is.string
foo<-"Error in uniroot(function(n) eval(p.body) - power, c(1 + 1e-10, 1e+05)) : \n  f() values at end points not of opposite sign\n"
grepl(text,foo)
?grepl
grepl(f,text)
grepl("f",foo)
grepl("f()",foo)
grepl("f() ",foo)
grepl("f() values",foo)
grepl("f() v",foo)
text[17]
substr(text,17,17)
grepl("f() v",foo,fixed=T)
grepl("f() values at",foo,fixed=T)
grepl("f() values at",foo,fixed=F)
grepl("f() values at t",foo,fixed=T)
pwr.norm.test(d=0.1,power=.8)
pwr.norm.test(d=0.01,power=.8)
pwr.norm.test(d=0.0001,power=.8)
pwr.norm.test(d=0.001,power=.8)
maxPower<-function(pwr){
es=0.01
niter=0
while(is.numeric(suppressWarnings(try(pwr.norm.test(d=es,power=pwr)$n,silent=F))) && niter<=1000){
n<-pwr.norm.test(d=es,power=pwr)$n
es<-es+0.01
niter<-niter+1
}
return(n)
}
maxPower(.8)
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
pwr.norm.test(d=0,power=.8)
pwr.norm.test(d=-.8,power=.8,alternative="less")
pwr.norm.test(d=1,power=.8,alternative="less")
pwr.norm.test(d=.1,power=.8,alternative="less")
pwr.norm.test(d=.01,power=.8,alternative="less")
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
plot(pwr.seq,nvec)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
plot(pwr.seq,nvec)
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
maxPower(.99)
pwr.norm.test(d=.2,power=.99)
source('~/.active-rstudio-document', echo=TRUE)
maxPower(.95)
maxPower(.98)
maxPower(.91)
maxPower(.90)
maxPower(.89)
maxPower(.86)
maxPower<-function(pwr,esinit=0.01){
es=esinit
niter=0
while(is.numeric(try(pwr.norm.test(d=es,power=pwr)$n,silent=T)) && niter<=1000){
n<-pwr.norm.test(d=es,power=pwr)$n
es<-es+0.01
niter<-niter+1
}
return(es)
}
maxPower(.9,.5)
maxPower(.9,.02)
maxPower(.9,.01)
maxPower(.9,.02)
pwr.norm.test(d=.01,power=.99)
pwr.norm.test(d=.01,power=.05)
pwr.norm.test(d=.01,power=.06)
pwr.norm.test(d=.02,power=.05)
pwr.norm.test(d=.03,power=.05)
pwr.norm.test(d=.04,power=.05)
pwr.norm.test(d=.01,power=.05)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
maxPower<-function(pwr,esinit=0.01){
es=esinit
niter=0
while(is.numeric(try(pwr.norm.test(d=es,power=pwr)$n,silent=T)) && niter>=10 && niter<=1000){
n<-pwr.norm.test(d=es,power=pwr)$n
es<-es+0.01
niter<-niter+1
}
return(es)
}
maxPower(.05)
maxPower(.05,.02)
maxPower(.05,.05)
maxPower(.05,.5)
maxPower(.95,.02)
maxPower(.95,.05)
maxPower(.95,.09)
source('~/.active-rstudio-document', echo=TRUE)
maxPower<-function(pwr,esinit=0.01){
es=esinit
niter=0
while(is.numeric(try(pwr.norm.test(d=es,power=pwr)$n,silent=T)) && niter<=1000){
n<-pwr.norm.test(d=es,power=pwr)$n
es<-es+0.01
niter<-niter+1
}
return(es)
}
nvec<-rep(NA,length(pwr.seq))
for(i in 1:99){
nvec[i]<-maxPower(pwr.seq[i])
}
plot(pwr.seq,nvec)
power.prop.test
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
as.numeric(NULL)
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
A=1.2
B=0.8
if(0<=A & A<=1)
return(TRUE)
?in
?is.in
?element
?findInterval
findInterval(A,c(0,1))
findInterval(B,c(0,1))
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
findInterval(c(0.1,1.6),c(0,1))
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
test<-findInterval(c(0.1,1.6),c(0,1))
test[1] && test[2]
test
test[1]==1 && test[2]==1
shiny::runApp('C:/Users/Nick/OneDrive/Documents/Kidwell Project/Binary Outcome SMART/SMARTsize')
